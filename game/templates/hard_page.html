<!DOCTYPE html>
{% load static %}
<html>
    <head>
        <title>DAVINCI GAME - HARD LEVEL</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" type="text/css" href="{% static 'css/hard.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'css/menu-style.css' %}">
        <!-- <link rel="stylesheet" type="text/css" href='{% static "/css/question-style.css" %}'> -->
    </head>

    <body>
        <a href= "../main-menu.html" class="button-left">Main menu</a>
        <h1>DAVINCI GAME</h1>
        <div id="mySidenav" class="sidenav">
          <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"><i class="fa fa-window-close"></i></a>
          <a class="sidetext" style="color: #000000;"> Welcome, {{user}}</a>
          <div class="log">
              <div class="l_btn">
                  <a id='logout-bth' class="log_btn" href="{% url 'logout' %}"><span>Logout</span></a>
              </div>
          </div>
      </div>

        <hr>

        <div class="turntoright">
            <span style="padding-right: 20px; font-size: 25px; font-family: Arial, Helvetica, sans-serif;">Score: </span>
            <span id="num" class="score-box">{{user.all_score}}</span>
        </div>
        <br>
        <img src="{{question.image.url}}" id='img' alt="hardpic" height="320" width="450">
        <!-- <form method="GET">
          <input type="hidden" id="ansKey" value="{{key_give}}"> -->
          <!-- <input type='text' id='key' value="{{key}}"/> -->
          <!-- <p id="key">{{key}}</p> -->
        <!-- </form> -->
        
        <div class="input-box">
          <form method="POST">
          {% csrf_token %}
            <span><input type="text" name="textfield" id="input" maxlength="{{ans_length}}" placeholder="{{ans_length}} letters" size="12" autofocus /></span>
            {% if user.current_hard > question.id %}
              <p id='correct'><i class="fa fa-check"></i></p>
            {% else %}
              <p id=incorrect"><i class="fa fa-close"></i></p>
            {% endif %}
          </form>
          <br>
            <form method="GET">
            {% csrf_token %}
              <input type="hidden" id="ansKey" value="{{key_give}}">
              <p id="key">{{key}}</p>
              <span><input type="submit" class="button-hint" name="hint-btn" onclick="hintLetter()" value="Hint"/></button></span>
            </form>
        </div>
        <form method="GET">
            <INPUT TYPE="button" id="forsubmit" class="button-submit" onclick="myFunction(), nexttoPage()" VALUE="SUBMIT">
            {% if question.id < 15 %}
                <a href="{% url 'game:h-picture' question.id %}" class="button-next" style="vertical-align:middle; visibility:hidden" id="next"><span>Next</span></a>
            {% else %}
                <a href="{% url 'game:index' %}" class="button-next" style="vertical-align:middle; visibility:hidden" id="next"><span>Next</span></a>
            {% endif %}
        </form>
    </body>
</html>

<script>

    function myFunction() { 
      document.getElementById("correct").innerHTML = "You are correct!";
      document.getElementById("correct").innerHTML = "Try again";
      document.getElementById("correct").style.textAlign = "center";
      document.getElementById("correct").style.color = "Brown";
      document.getElementById("correct").style.fontFamily = "Arial Rounded MT";
      document.getElementById("correct").style.fontSize = "larger";
      }
  
    var scoreText = document.getElementById("num")
    var score = Number(scoreText.innerText)
    var submit_btn = document.getElementById("forsubmit")
    var next_btn = document.getElementById("next")
    
    function hintonClick(){
      if (score >= 2) {
        score -= 2;
        scoreText.innerText =  String(score)
      }
    }

    function hintLetter() {
      var ranChar = '';
      var characters = ansKey.value;
      var charactersLength = characters.length;
      // ranChar = characters.charAt(Math.floor(Math.random() * charactersLength));
      for (var i =0; i< ChannelMergerNode; i++){
        // ranChar = characters[i];
        document.getElementById('key').innerHTML = characters[i];
      }
      // document.getElementById('key').innerHTML = ranChar;
      

  }
  
    function nexttoPage() {
      document.getElementById("forsubmit").style.visibility = 'hidden';
      submit_btn.style.display="none";
      document.getElementById("next").style.visibility = 'visible';
      next_btn.display="block";
    }
  
  </script>